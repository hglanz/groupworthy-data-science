<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Joins + Pivots – Introduction to Statistical Computing in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-dd01fc8b47943ccb281ee7996e9eafb5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-760729c915d1dde12ab269fcb4c0541b.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Data Joins + Pivots</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/r-flowers.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/hglanz/statistical-computing-with-r" title="GitHub organization" class="quarto-navigation-tool px-1" aria-label="GitHub organization"><i class="bi bi-github"></i></a>
    <a href="https://canvas.calpoly.edu" title="Cal Poly Canvas" class="quarto-navigation-tool px-1" aria-label="Cal Poly Canvas"><i class="bi bi-person-fill"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course-materials/course-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course-materials/course-syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course-materials/course-support.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Support</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course-materials/course-team.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Teaching team</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course-materials/computing-access.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Access</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course-materials/course_resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Weekly materials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-0-discord.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 0 - Course Set-up</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-1-r-rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1, Part 1 - R &amp; RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-1-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1, Part 2 - Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-1-version-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1, Part 3 - Version Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-2-ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2, Part 1 - ggplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-2-projects-data-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2, Part 2 - Data Import</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../weeks/week-3-dplyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3 - dplyr</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Labs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/instructions/lab-1-instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1 &amp; Challenge 1 Instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/instructions/lab-2-instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2 Instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/instructions/challenge-2-instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Challenge 2 Instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/instructions/lab-3-instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3 Instructions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/instructions/challenge-3-instructions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Challenge 3 Instructions</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tuesday-january-28" id="toc-tuesday-january-28" class="nav-link active" data-scroll-target="#tuesday-january-28">Tuesday, January 28</a></li>
  <li><a href="#data-layouts" id="toc-data-layouts" class="nav-link" data-scroll-target="#data-layouts">Data Layouts</a>
  <ul class="collapse">
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data">Tidy Data</a></li>
  <li><a href="#creating-tidy-data" id="toc-creating-tidy-data" class="nav-link" data-scroll-target="#creating-tidy-data">Creating Tidy Data</a></li>
  <li><a href="#cereal-data" id="toc-cereal-data" class="nav-link" data-scroll-target="#cereal-data">Cereal Data</a></li>
  <li><a href="#creating-tidy-data-1" id="toc-creating-tidy-data-1" class="nav-link" data-scroll-target="#creating-tidy-data-1">Creating Tidy Data</a></li>
  <li><a href="#tidying-the-cereals-data" id="toc-tidying-the-cereals-data" class="nav-link" data-scroll-target="#tidying-the-cereals-data">Tidying the Cereals Data</a></li>
  </ul></li>
  <li><a href="#pivoting-data" id="toc-pivoting-data" class="nav-link" data-scroll-target="#pivoting-data">Pivoting Data</a>
  <ul class="collapse">
  <li><a href="#manual-method" id="toc-manual-method" class="nav-link" data-scroll-target="#manual-method">Manual Method</a></li>
  <li><a href="#manual-method-steps" id="toc-manual-method-steps" class="nav-link" data-scroll-target="#manual-method-steps">Manual Method: Steps</a></li>
  <li><a href="#manual-method-steps-1" id="toc-manual-method-steps-1" class="nav-link" data-scroll-target="#manual-method-steps-1">Manual Method: Steps</a></li>
  <li><a href="#manual-method-steps-2" id="toc-manual-method-steps-2" class="nav-link" data-scroll-target="#manual-method-steps-2">Manual Method: Steps</a></li>
  <li><a href="#manual-method-steps-3" id="toc-manual-method-steps-3" class="nav-link" data-scroll-target="#manual-method-steps-3">Manual Method: Steps</a></li>
  <li><a href="#computational-approach" id="toc-computational-approach" class="nav-link" data-scroll-target="#computational-approach">Computational Approach</a></li>
  <li><a href="#pivot_longer" id="toc-pivot_longer" class="nav-link" data-scroll-target="#pivot_longer"><code>pivot_longer()</code></a></li>
  <li><a href="#pivot_longer-1" id="toc-pivot_longer-1" class="nav-link" data-scroll-target="#pivot_longer-1"><code>pivot_longer()</code></a></li>
  <li><a href="#pivot_wider" id="toc-pivot_wider" class="nav-link" data-scroll-target="#pivot_wider"><code>pivot_wider()</code></a></li>
  <li><a href="#pivot_wider-1" id="toc-pivot_wider-1" class="nav-link" data-scroll-target="#pivot_wider-1"><code>pivot_wider()</code></a></li>
  <li><a href="#pivot_wider-2" id="toc-pivot_wider-2" class="nav-link" data-scroll-target="#pivot_wider-2"><code>pivot_wider()</code></a></li>
  <li><a href="#better-names-in-pivot_wider" id="toc-better-names-in-pivot_wider" class="nav-link" data-scroll-target="#better-names-in-pivot_wider">Better names in <code>pivot_wider()</code></a></li>
  </ul></li>
  <li><a href="#data-joins" id="toc-data-joins" class="nav-link" data-scroll-target="#data-joins">Data Joins</a>
  <ul class="collapse">
  <li><a href="#relational-data" id="toc-relational-data" class="nav-link" data-scroll-target="#relational-data">Relational Data</a></li>
  <li><a href="#data-joins-1" id="toc-data-joins-1" class="nav-link" data-scroll-target="#data-joins-1">Data Joins</a></li>
  <li><a href="#keys" id="toc-keys" class="nav-link" data-scroll-target="#keys">Keys</a></li>
  <li><a href="#inner_join" id="toc-inner_join" class="nav-link" data-scroll-target="#inner_join"><code>inner_join()</code></a></li>
  <li><a href="#inner_join-imdb-example" id="toc-inner_join-imdb-example" class="nav-link" data-scroll-target="#inner_join-imdb-example"><code>inner_join()</code>: IMDb Example</a></li>
  <li><a href="#inner_join-imdb-example-1" id="toc-inner_join-imdb-example-1" class="nav-link" data-scroll-target="#inner_join-imdb-example-1"><code>inner_join()</code>: IMDb Example</a></li>
  <li><a href="#piping-joins" id="toc-piping-joins" class="nav-link" data-scroll-target="#piping-joins">Piping Joins</a></li>
  <li><a href="#more-mutating-joins" id="toc-more-mutating-joins" class="nav-link" data-scroll-target="#more-mutating-joins">More Mutating Joins</a></li>
  <li><a href="#more-mutating-joins-1" id="toc-more-mutating-joins-1" class="nav-link" data-scroll-target="#more-mutating-joins-1">More Mutating Joins</a></li>
  <li><a href="#filtering-joins-semi_join" id="toc-filtering-joins-semi_join" class="nav-link" data-scroll-target="#filtering-joins-semi_join">Filtering Joins: <code>semi_join()</code></a></li>
  <li><a href="#filtering-joins-semi_join-1" id="toc-filtering-joins-semi_join-1" class="nav-link" data-scroll-target="#filtering-joins-semi_join-1">Filtering Joins: <code>semi_join()</code></a></li>
  <li><a href="#filtering-joins-anti_join" id="toc-filtering-joins-anti_join" class="nav-link" data-scroll-target="#filtering-joins-anti_join">Filtering Joins: <code>anti_join()</code></a></li>
  <li><a href="#filtering-joins-anti_join-1" id="toc-filtering-joins-anti_join-1" class="nav-link" data-scroll-target="#filtering-joins-anti_join-1">Filtering Joins: <code>anti_join()</code></a></li>
  <li><a href="#pa-4-military-spending" id="toc-pa-4-military-spending" class="nav-link" data-scroll-target="#pa-4-military-spending">PA 4: Military Spending</a></li>
  <li><a href="#this-activity-will-require-knowledge-of" id="toc-this-activity-will-require-knowledge-of" class="nav-link" data-scroll-target="#this-activity-will-require-knowledge-of">This activity will require knowledge of:</a></li>
  <li><a href="#dplyr-resources" id="toc-dplyr-resources" class="nav-link" data-scroll-target="#dplyr-resources">dplyr Resources</a></li>
  <li><a href="#tidyr-resources" id="toc-tidyr-resources" class="nav-link" data-scroll-target="#tidyr-resources">tidyr Resources</a></li>
  <li><a href="#pair-programming-expectations" id="toc-pair-programming-expectations" class="nav-link" data-scroll-target="#pair-programming-expectations">Pair Programming Expectations</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#external-resources" id="toc-external-resources" class="nav-link" data-scroll-target="#external-resources">External Resources</a></li>
  <li><a href="#submission" id="toc-submission" class="nav-link" data-scroll-target="#submission">Submission</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/hglanz/statistical-computing-with-r/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="week-4-joins-1.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Joins + Pivots</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="tuesday-january-28" class="level2">
<h2 class="anchored" data-anchor-id="tuesday-january-28">Tuesday, January 28</h2>
<p>Today we will discuss…</p>
<!-- -   Discord & Tokens -->
<!-- -   Grade Expectations  -->
<!--     + Survey on Canvas -->
<ul>
<li>New Material
<ul>
<li>Pivoting data with <code>tidyr</code></li>
<li>Joining data with <code>dplyr</code></li>
</ul></li>
<li><a href="../../group-activities/week-4/PA4-tidyr.qmd">PA 4: Military Spending</a></li>
</ul>
<!-- # Discord & Deadline Extension Tokens -->
<!-- # Discord & Deadline Extension Tokens -->
<!-- > If you answer / respond to another student's question on Discord, you will  -->
<!-- > earn one additional "token" (3-day deadline extension request).  -->
<!-- # Grade Expectations -->
<!-- # Grade Expectations -->
<!-- > The [course syllabus](../../course-materials/course-syllabus.qmd#sec-grades) -->
<!-- > has been updated to reflect the grade criteria you all proposed.  -->
<!-- # Grade Expectations -->
<!-- > The [course syllabus](../../course-materials/course-syllabus.qmd#sec-grades) -->
<!-- > has been updated to reflect the grade criteria you all proposed.  -->
<!-- You have until Sunday [to vote](https://canvas.calpoly.edu/courses/138158/quizzes/247752)  -->
<!-- on whether you agree with the proposed criteria, and to suggest ways these -->
<!-- criteria could be revised. -->
</section>
<section id="data-layouts" class="level1">
<h1>Data Layouts</h1>
<section id="tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="tidy-data">Tidy Data</h2>
<p>Tidy data…</p>
<ul>
<li>is rectangular.</li>
<li>has observations as rows and variables as columns.</li>
<li><strong>has different formats for different tasks.</strong></li>
</ul>
<p><img src="https://r4ds.hadley.nz/images/tidy-1.png" class="img-fluid" alt="This image shows a visual representation of the three key concepts in tidy data: variables, observations, and values. It is divided into three sections. The first section on the left highlights vertical arrows pointing down each column of a table, labeled 'variables,' showing that each column represents a different variable (country, year, cases, population). The middle section has horizontal arrows pointing across rows of the same table, labeled 'observations,' indicating that each row is an observation or data point. The third section on the right has circles around individual data points within the table, labeled 'values,' indicating the actual values for each variable in the dataset."></p>
</section>
<section id="creating-tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="creating-tidy-data">Creating Tidy Data</h2>
<p>We may need to <strong>transform</strong> our data to turn it into the <strong>version of tidy</strong> that is best for a task at hand.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.openscapes.org/img/blog/tidydata/tidydata_4.jpg" class="img-fluid figure-img" alt="An illustration of two round, fluffy characters, one green and one purple, holding a large table between them labeled 'TIDY.' The table is held by clamps on either side labeled 'WRANGLE' in orange and pink. The green character on the left is smiling with one arm raised, while the purple character on the right is cheering with both arms up. The table represents tidy data, and the clamps labeled 'WRANGLE' suggest data manipulation or preparation."></p>
<figcaption>Image by Allison Horst</figcaption>
</figure>
</div>
</section>
<section id="cereal-data" class="level2">
<h2 class="anchored" data-anchor-id="cereal-data">Cereal Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(liver)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(cereal)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cereal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:450px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">type</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">calories</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">protein</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fat</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sodium</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fiber</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">carbo</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sugars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">potass</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vitamins</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">weight</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">cups</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">100% Bran</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">130</td>
<td style="text-align: right;">10.0</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">68.40297</td>
</tr>
<tr class="even">
<td style="text-align: left;">100% Natural Bran</td>
<td style="text-align: left;">Q</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">33.98368</td>
</tr>
<tr class="odd">
<td style="text-align: left;">All-Bran</td>
<td style="text-align: left;">K</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">260</td>
<td style="text-align: right;">9.0</td>
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">320</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">59.42551</td>
</tr>
<tr class="even">
<td style="text-align: left;">All-Bran with Extra Fiber</td>
<td style="text-align: left;">K</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">140</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">330</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">93.70491</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Almond Delight</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">34.38484</td>
</tr>
<tr class="even">
<td style="text-align: left;">Apple Cinnamon Cheerios</td>
<td style="text-align: left;">G</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">29.50954</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="creating-tidy-data-1" class="level2">
<h2 class="anchored" data-anchor-id="creating-tidy-data-1">Creating Tidy Data</h2>
<p>Let’s say we want to look at <code>mean</code> <strong>cereal nutrients</strong> based on <code>shelf</code>.</p>
<p>. . .</p>
<p>Currently, the data are in a <strong>wide</strong> format – a separate column for each nutrient.</p>
<p><strong>Transforming</strong> the data will make plotting easier.</p>
</section>
<section id="tidying-the-cereals-data" class="level2">
<h2 class="anchored" data-anchor-id="tidying-the-cereals-data">Tidying the Cereals Data</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Wide</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Wide Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Long</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Long Plot</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>cereal_wide <span class="ot">&lt;-</span> cereal <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">group_by</span>(shelf) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> calories<span class="sc">:</span>vitamins, </span>
<span id="cb2-5"><a href="#cb2-5"></a>           <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x)</span>
<span id="cb2-6"><a href="#cb2-6"></a>           )</span>
<span id="cb2-7"><a href="#cb2-7"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">calories</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">protein</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fat</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sodium</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fiber</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">carbo</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sugars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">potass</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vitamins</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">102.5000</td>
<td style="text-align: right;">2.650000</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">176.2500</td>
<td style="text-align: right;">1.6850000</td>
<td style="text-align: right;">15.80000</td>
<td style="text-align: right;">4.800000</td>
<td style="text-align: right;">75.50000</td>
<td style="text-align: right;">20.00000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">109.5238</td>
<td style="text-align: right;">1.904762</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">145.7143</td>
<td style="text-align: right;">0.9047619</td>
<td style="text-align: right;">13.61905</td>
<td style="text-align: right;">9.619048</td>
<td style="text-align: right;">57.80952</td>
<td style="text-align: right;">23.80952</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">107.7778</td>
<td style="text-align: right;">2.861111</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">158.6111</td>
<td style="text-align: right;">3.1388889</td>
<td style="text-align: right;">14.50000</td>
<td style="text-align: right;">6.527778</td>
<td style="text-align: right;">129.83333</td>
<td style="text-align: right;">35.41667</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="small">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"calories_col"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"sugars_col"</span> <span class="ot">=</span> <span class="st">"orange3"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>cereal_wide <span class="sc">|&gt;</span> </span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> calories, <span class="at">color =</span> <span class="st">"calories_col"</span>)) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> calories, <span class="at">color =</span> <span class="st">"calories_col"</span>)) <span class="sc">+</span> </span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> sugars, <span class="at">color =</span> <span class="st">"sugars_col"</span>)) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> sugars, <span class="at">color =</span> <span class="st">"sugars_col"</span>)) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_colors, <span class="at">labels =</span> <span class="fu">names</span>(my_colors)) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Shelf"</span>, <span class="at">y =</span> <span class="st">""</span>, <span class="at">subtitle =</span> <span class="st">"Mean Amount"</span>, <span class="at">color =</span> <span class="st">"Nutrient"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4-joins-1_files/figure-html/cereal-wide-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="A line chart displaying the relationship between the mean amount of two nutrients ('calories_col' and 'sugars_col') and their corresponding shelf number (1, 2, 3). The y-axis represents the mean amount, ranging from 0 to 100, and the x-axis represents the shelf numbers (1, 2, 3). The blue line represents 'calories_col,' with a relatively flat trend around 90 across the shelves. The orange line represents 'sugars_col,' which remains close to zero across the same shelves. The legend on the right identifies the nutrient lines." width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>cereal_long <span class="ot">&lt;-</span> cereal <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> calories<span class="sc">:</span>vitamins,</span>
<span id="cb4-3"><a href="#cb4-3"></a>               <span class="at">names_to =</span> <span class="st">"Nutrient"</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>               <span class="at">values_to =</span> <span class="st">"Amount"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">group_by</span>(shelf, Nutrient) <span class="sc">|&gt;</span> </span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">summarise</span>(<span class="at">mean_amount =</span> <span class="fu">mean</span>(Amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'shelf'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Nutrient</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">mean_amount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">calories</td>
<td style="text-align: right;">102.5000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">carbo</td>
<td style="text-align: right;">15.8000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">fat</td>
<td style="text-align: right;">0.6000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">fiber</td>
<td style="text-align: right;">1.6850000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">potass</td>
<td style="text-align: right;">75.5000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">protein</td>
<td style="text-align: right;">2.6500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">sodium</td>
<td style="text-align: right;">176.2500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">sugars</td>
<td style="text-align: right;">4.8000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">vitamins</td>
<td style="text-align: right;">20.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">calories</td>
<td style="text-align: right;">109.5238095</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">carbo</td>
<td style="text-align: right;">13.6190476</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">fat</td>
<td style="text-align: right;">1.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">fiber</td>
<td style="text-align: right;">0.9047619</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">potass</td>
<td style="text-align: right;">57.8095238</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">protein</td>
<td style="text-align: right;">1.9047619</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">sodium</td>
<td style="text-align: right;">145.7142857</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">sugars</td>
<td style="text-align: right;">9.6190476</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">vitamins</td>
<td style="text-align: right;">23.8095238</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">calories</td>
<td style="text-align: right;">107.7777778</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">carbo</td>
<td style="text-align: right;">14.5000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">fat</td>
<td style="text-align: right;">1.2500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">fiber</td>
<td style="text-align: right;">3.1388889</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">potass</td>
<td style="text-align: right;">129.8333333</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">protein</td>
<td style="text-align: right;">2.8611111</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">sodium</td>
<td style="text-align: right;">158.6111111</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">sugars</td>
<td style="text-align: right;">6.5277778</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">vitamins</td>
<td style="text-align: right;">35.4166667</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="small">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>cereal_long <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, </span>
<span id="cb6-3"><a href="#cb6-3"></a>                       <span class="at">y =</span> mean_amount, </span>
<span id="cb6-4"><a href="#cb6-4"></a>                       <span class="at">color =</span> Nutrient)</span>
<span id="cb6-5"><a href="#cb6-5"></a>         ) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Shelf"</span>, </span>
<span id="cb6-9"><a href="#cb6-9"></a>       <span class="at">y =</span> <span class="st">""</span>, </span>
<span id="cb6-10"><a href="#cb6-10"></a>       <span class="at">subtitle =</span> <span class="st">"Mean Amount"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4-joins-1_files/figure-html/cereal-long-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="pivoting-data" class="level1">
<h1>Pivoting Data</h1>
<div class="columns">
<div class="column">
<p><img src="https://github.com/gadenbuie/tidyexplain/raw/main/images/static/png/original-dfs-tidy.png" class="img-fluid" alt="Two tables side by side, illustrating the difference between 'wide' and 'long' data formats. The left table labeled 'wide' has columns: 'id,' 'x,' 'y,' and 'z.' The 'id' column contains the values 1 and 2, and the 'x,' 'y,' and 'z' columns contain the values a, b, c, d, e, and f spread across the rows. The right table labeled 'long' has columns: 'id,' 'key,' and 'val.' The 'id' column has repeated values (1 and 2), the 'key' column contains 'x,' 'y,' and 'z,' and the 'val' column contains 'a' through 'f,' corresponding to the wide table but reorganized in a 'long' format."></p>
</div><div class="column">
<p><img src="https://github.com/gadenbuie/tidyexplain/raw/main/images/tidyr-pivoting.gif" class="img-fluid" alt="A gif showing the visual transformation of the data pictured, going from the wide format to the long format. Above the image is the R code that would produce each data layout."></p>
</div>
</div>
<section id="manual-method" class="level2">
<h2 class="anchored" data-anchor-id="manual-method">Manual Method</h2>
<p>Consider daily rainfall observed in SLO in January 2023.</p>
<ul>
<li>The data is in a human-friendly form (like a calendar).</li>
<li>Each week has a row, and each day has a column.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/slo-rainfall.jpg" class="img-fluid figure-img" alt="A spreadsheet displaying a table with days of the week as column headers (Sunday to Saturday) and weeks numbered 1 to 5 in the first column. The table contains numerical values corresponding to each day of the week for each week. Some cells contain 'NA,' indicating missing values, while other cells contain numerical values like 0.12, 0.27, 4.26, and so on. Several cells contain zeros, and a few cells are left empty."></p>
<figcaption><a href="cesanluisobispo.ucanr.edu">Data source</a></figcaption>
</figure>
</div>
<p>How would you <strong>manually</strong> convert this to <strong>long format</strong>?</p>
</section>
<section id="manual-method-steps" class="level2">
<h2 class="anchored" data-anchor-id="manual-method-steps">Manual Method: Steps</h2>
<div class="incremental">
<div class="small">
<ol class="incremental" start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
</ol>
</div>
</div>
<p>. . .</p>
<center>
<p><img src="images/pivot_rain1.png" class="img-fluid" style="width:25.0%" alt="A spreadsheet displaying a table with days of the week as column headers (Sunday to Saturday) and weeks numbered 1 to 5 in the first column. The table contains numerical values corresponding to each day of the week for each week. Some cells contain 'NA,' indicating missing values, while other cells contain numerical values like 0.12, 0.27, 4.26, and so on. Several cells contain zeros, and a few cells are left empty."></p>
</center>
</section>
<section id="manual-method-steps-1" class="level2">
<h2 class="anchored" data-anchor-id="manual-method-steps-1">Manual Method: Steps</h2>
<div class="small">
<ol start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Monday values over.</li>
</ol>
</div>
<center>
<img src="images/pivot_rain2.png" class="img-fluid" style="width:25.0%" alt="A table with three columns: 'Week,' 'Day_of_Week,' and 'Rainfall.' The 'Week' column contains numbers 1 to 5, while the 'Day_of_Week' column alternates between 'Sunday' and 'Monday.' The 'Rainfall' column lists numerical values for each week and day. For Sunday, the rainfall values are 0, 0.27, 0.34, 0, and 'NA' for weeks 1 through 5, respectively. For Monday, the rainfall values are 0.12, 4.26, 0.33, 0, and 'NA' for weeks 1 through 5, respectively.">
</center>
</section>
<section id="manual-method-steps-2" class="level2">
<h2 class="anchored" data-anchor-id="manual-method-steps-2">Manual Method: Steps</h2>
<div class="small">
<ol start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Monday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Tuesday values over.</li>
</ol>
</div>
</section>
<section id="manual-method-steps-3" class="level2">
<h2 class="anchored" data-anchor-id="manual-method-steps-3">Manual Method: Steps</h2>
<div class="small">
<ol start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Monday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Tuesday values over.</li>
<li>Continue for the rest of the days of the week.</li>
</ol>
</div>
</section>
<section id="computational-approach" class="level2">
<h2 class="anchored" data-anchor-id="computational-approach">Computational Approach</h2>
<p><img src="images/slo-rainfall-sketch.png" class="img-fluid" alt="A table showing rainfall data for each day of the week across five weeks, with annotations explaining how to reshape the data from wide to long format. The table has columns for 'Week,' followed by the days of the week (Sunday to Saturday), and contains numerical values representing rainfall. There are three color-coded annotations: the 'Week' column is highlighted in green, labeled 'key' with the note 'keep this column, but repeat it many times.' The day names (Sunday through Saturday) are highlighted in red with the note 'turn into new column: Day_of_Week (repeat day of week many times).' The data cells are highlighted in blue with the note 'turn into new column: Rainfall (values for each week # and day of week).'"></p>
<p>We can use <code>pivot_longer()</code> to turn a <strong>wide</strong> dataset into a <strong>long(er)</strong> dataset.</p>
</section>
<section id="pivot_longer" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer"><code>pivot_longer()</code></h2>
<p>Take a <strong>wide</strong> dataset and turn it into a <strong>long</strong> dataset.</p>
<ul>
<li><code>cols</code> – specify the columns that should be pivoted.
<ul>
<li>Do <strong>not</strong> include the names of ID columns (columns to not be pivoted).</li>
</ul></li>
<li><code>names_to</code> – the name of the new column containing the old column names.</li>
<li><code>values_to</code> – the name of the new column containing the old column values.</li>
</ul>
</section>
<section id="pivot_longer-1" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer-1"><code>pivot_longer()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>slo_rainfall <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Sunday<span class="sc">:</span>Saturday,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to  =</span> <span class="st">"Day_of_Week"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Daily_Rainfall"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 4 warnings in `mutate()`.
The first warning was:
ℹ In argument: `across(Sunday:Saturday, as.numeric)`.
Caused by warning:
! NAs introduced by coercion
ℹ Run `dplyr::last_dplyr_warnings()` to see the 3 remaining warnings.</code></pre>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Week</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Day_of_Week</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Daily_Rainfall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">0.12</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">1.58</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.91</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">0.05</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.27</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">4.26</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.43</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.16</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">1.41</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.34</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">0.33</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.13</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="pivot_wider" class="level2">
<h2 class="anchored" data-anchor-id="pivot_wider"><code>pivot_wider()</code></h2>
<p>Take a <strong>long</strong> dataset and turn it into a <strong>wide</strong> dataset.</p>
<ul>
<li><code>id_cols</code> – specify the column(s) that contain the ID for unique rows in the wide dataset.</li>
<li><code>names_from</code> – the name of the column containing the new column names.</li>
<li><code>values_from</code> – the name of the column containing the new column values.</li>
</ul>
</section>
<section id="pivot_wider-1" class="level2">
<h2 class="anchored" data-anchor-id="pivot_wider-1"><code>pivot_wider()</code></h2>
<p>Let’s say we calculate the <code>mean</code> amount of <code>protein</code> for cereals on each <code>shelf</code> and for each <code>manuf</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mean_protein <span class="ot">&lt;-</span> cereal <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(manuf, shelf) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_protein =</span> <span class="fu">mean</span>(protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'manuf'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">mean_protein</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">G</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">G</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.285714</td>
</tr>
<tr class="even">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">K</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.750000</td>
</tr>
<tr class="even">
<td style="text-align: left;">K</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.142857</td>
</tr>
<tr class="odd">
<td style="text-align: left;">K</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.916667</td>
</tr>
<tr class="even">
<td style="text-align: left;">N</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">N</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">P</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">P</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">P</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.000000</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="pivot_wider-2" class="level2">
<h2 class="anchored" data-anchor-id="pivot_wider-2"><code>pivot_wider()</code></h2>
<p>We can make this dataset more easily readable…</p>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mean_protein <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(shelf) <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> manuf,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> shelf,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> mean_protein)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:420px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">1</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">2</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">1.285714</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="even">
<td style="text-align: left;">K</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">2.142857</td>
<td style="text-align: right;">2.916667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">P</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="better-names-in-pivot_wider" class="level2">
<h2 class="anchored" data-anchor-id="better-names-in-pivot_wider">Better names in <code>pivot_wider()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>mean_protein <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">arrange</span>(shelf) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> manuf,</span>
<span id="cb12-4"><a href="#cb12-4"></a>              <span class="at">names_from =</span> shelf,</span>
<span id="cb12-5"><a href="#cb12-5"></a>              <span class="at">values_from =</span> mean_protein,</span>
<span id="cb12-6"><a href="#cb12-6"></a>              <span class="at">names_prefix =</span> <span class="st">"Shelf_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:420px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Shelf_1</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Shelf_2</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Shelf_3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">1.285714</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="even">
<td style="text-align: left;">K</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">2.142857</td>
<td style="text-align: right;">2.916667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">P</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
</section>
<section id="data-joins" class="level1">
<h1>Data Joins</h1>
<section id="relational-data" class="level2">
<h2 class="anchored" data-anchor-id="relational-data">Relational Data</h2>
<p>Multiple, interconnected tables of data are called <strong>relational</strong>.</p>
<ul>
<li>It is the <em>relation</em> between datasets, not just the individual datasets themselves, that are important.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/imdb_relational.png" class="img-fluid figure-img" alt="A diagram depicting the relationships between various tables in a movie database. The tables and their columns are as follows. directors_genres: Contains 'director_id' (int), 'genre' (varchar), and 'prob' (float). Linked to the 'directors' table by 'director_id.' movies_directors: Contains 'director_id' (int) and 'movie_id' (int). Linked to both the 'directors' and 'movies' tables by 'director_id' and 'movie_id.' movies_genres: Contains 'movie_id' (int) and 'genre' (varchar). Linked to the 'movies' table by 'movie_id.' roles: Contains 'actor_id' (int), 'movie_id' (int), and 'role' (varchar). Linked to both the 'actors' and 'movies' tables by 'actor_id' and 'movie_id.' The following entity tables are represented at the bottom: directors: Contains 'id' (int), 'first_name' (varchar), and 'last_name' (varchar). movies: Contains 'id' (int), 'name' (varchar), 'year' (int), and 'rank' (float). actors: Contains 'id' (int), 'first_name' (varchar), 'last_name' (varchar), and 'gender' (char). Arrows represent relationships between the various tables, with foreign keys connecting them."></p>
<figcaption>IMDb movie relational data</figcaption>
</figure>
</div>
</section>
<section id="data-joins-1" class="level2">
<h2 class="anchored" data-anchor-id="data-joins-1">Data Joins</h2>
<p>We can <strong>combine</strong> (join) data tables based on their relations.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Mutating joins</strong></p>
<p>Add <em>variables</em> from a new dataframe to observations in an existing dataframe.</p>
<p><code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code>, <code>outer_join()</code></p>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<p><strong>Filtering Joins</strong></p>
<p>Filter <em>observations</em> based on values in new dataframe.</p>
<p><code>semi_join()</code>, <code>anti_join()</code></p>
</div>
</div>
</section>
<section id="keys" class="level2">
<h2 class="anchored" data-anchor-id="keys">Keys</h2>
<p>A key uniquely identifies an observation in a data set.</p>
<ul>
<li>To combine (join) two datasets, the <strong>key</strong> needs to be present in both.</li>
</ul>
<p>. . .</p>
<p><img src="images/imdb-keys.png" class="img-fluid" alt="A similar entity-relationship diagram (ERD) to the previous one, with the same tables and relationships between movie-related data. However, in this version, key columns in the tables are color-coded to highlight relationships. Orange highlights the 'director_id' in the 'directors_genres,' 'movies_directors,' and 'directors' tables, showing the connection between directors and their genres and movies. Blue highlights the 'movie_id' in the 'movies_directors,' 'movies_genres,' 'roles,' and 'movies' tables, showing the relationship between movies, genres, and roles. Green highlights the 'actor_id' in the 'roles' and 'actors' tables, showing the connection between actors and their roles in movies. Arrows continue to represent relationships between tables, following foreign key connections, now emphasized with the color coding."></p>
</section>
<section id="inner_join" class="level2">
<h2 class="anchored" data-anchor-id="inner_join"><code>inner_join()</code></h2>
<p>Keeps observations when their keys are present in <strong>both</strong> datasets.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img src="images/join_xy.png" class="img-fluid" alt="This image shows two tables on the left, labeled 'x' and 'y.' The 'x' table contains two columns: a key column with values 1, 2, and 3, and a value column with 'x1,' 'x2,' and 'x3.' The 'y' table also has two columns: a key column with values 1, 2, and 4, and a value column with 'y1,' 'y2,' and 'y3.'"></p>
</div><div class="column" style="width:50%;">
<p><img src="images/inner_join.png" class="img-fluid" alt="This table combines data from both 'x' and 'y.' based on the 'key' column. It contains three columns: 'key,' 'val_x,' and 'val_y.' For key values 1 and 2, the corresponding values from both 'x' and 'y' are shown ('x1' with 'y1' and 'x2' with 'y2'), while the third rows from both original tables are excluded due to the mismatch in key values."></p>
</div>
</div>
</section>
<section id="inner_join-imdb-example" class="level2">
<h2 class="anchored" data-anchor-id="inner_join-imdb-example"><code>inner_join()</code>: IMDb Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>directors_genres_subset <span class="ot">&lt;-</span> directors_genres <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(director_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">429</span>, <span class="dv">2931</span>, <span class="dv">11652</span>, <span class="dv">14927</span>, <span class="dv">15092</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(director_id) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> prob, <span class="at">n =</span> <span class="dv">2</span>, <span class="at">with_ties =</span> F)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>movies_directors_subset <span class="ot">&lt;-</span> movies_directors <span class="sc">|&gt;</span> </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(director_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">429</span>, <span class="dv">9247</span>, <span class="dv">11652</span>, <span class="dv">14927</span>, <span class="dv">15092</span>))</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>directors_subset <span class="ot">&lt;-</span> directors <span class="sc">|&gt;</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">429</span>, <span class="dv">9247</span>, <span class="dv">11652</span>, <span class="dv">14927</span>, <span class="dv">15092</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>directors_genres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:160px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>movies_directors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:160px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">movie_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: right;">300229</td>
</tr>
<tr class="even">
<td style="text-align: right;">9247</td>
<td style="text-align: right;">124110</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: right;">10920</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: right;">333856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: right;">192017</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: right;">109093</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: right;">237431</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
<p><font size="6"></font></p><font size="6">
<p>ID: 429, <strong>2931</strong>, 11652, 14927, 15092       ID: 429, <strong>9247</strong>, 11652, 14927, 15092</p>
</font><p><font size="6"></font></p>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(directors_genres, movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(director_id)`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in inner_join(directors_genres_subset, movies_directors_subset): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 5 of `x` matches multiple rows in `y`.
ℹ Row 1 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:160px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">movie_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
<td style="text-align: right;">300229</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
<td style="text-align: right;">300229</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">10920</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">333856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">10920</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">333856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">192017</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">192017</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">109093</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">237431</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">109093</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">237431</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p><font size="6"></font></p><font size="6">
<p>ID: 429, <del><strong>2931</strong></del>, <del><strong>9247</strong></del>, 11652, 14927, 15092</p>
</font><p><font size="6"></font></p>
</section>
<section id="inner_join-imdb-example-1" class="level2">
<h2 class="anchored" data-anchor-id="inner_join-imdb-example-1"><code>inner_join()</code>: IMDb Example</h2>
<p>What if our <strong>key</strong> does not have the same name?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>directors_genres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:170px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>directors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:170px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">first_name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">last_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Andrew</td>
<td style="text-align: left;">Adamson</td>
</tr>
<tr class="even">
<td style="text-align: right;">9247</td>
<td style="text-align: left;">Zach</td>
<td style="text-align: left;">Braff</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">James (I)</td>
<td style="text-align: left;">Cameron</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Ron</td>
<td style="text-align: left;">Clements</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Ethan</td>
<td style="text-align: left;">Coen</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">inner_join</span>(directors_genres, </span>
<span id="cb21-2"><a href="#cb21-2"></a>           directors, </span>
<span id="cb21-3"><a href="#cb21-3"></a>           <span class="at">by =</span> <span class="fu">join_by</span>(director_id <span class="sc">==</span> id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:170px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">first_name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">last_name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Andrew</td>
<td style="text-align: left;">Adamson</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Andrew</td>
<td style="text-align: left;">Adamson</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">James (I)</td>
<td style="text-align: left;">Cameron</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">James (I)</td>
<td style="text-align: left;">Cameron</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Ron</td>
<td style="text-align: left;">Clements</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Ron</td>
<td style="text-align: left;">Clements</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Ethan</td>
<td style="text-align: left;">Coen</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Ethan</td>
<td style="text-align: left;">Coen</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="piping-joins" class="level2">
<h2 class="anchored" data-anchor-id="piping-joins">Piping Joins</h2>
<p>Remember: the dataset you pipe in becomes the <strong>first argument</strong> of the function you are piping into!</p>
<ul>
<li>So if you are using a pipe, you will only be specifying the <strong>right</strong> dataset inside the <code>join</code> function.</li>
</ul>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(directors_genres, movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>…is equivalent to…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="more-mutating-joins" class="level2">
<h2 class="anchored" data-anchor-id="more-mutating-joins">More Mutating Joins</h2>
<div class="small">
<ul>
<li><p><code>left_join()</code> – keep only (and all) observations present in the left data set</p></li>
<li><p><code>right_join()</code> – keep only (and all) observations present in the right data set</p></li>
<li><p><code>full_join()</code> – keep only (and all) observations present in <strong>both</strong> data sets</p></li>
</ul>
</div>
<p><img src="images/joins.png" class="img-fluid" style="width:50.0%" alt="Four Venn diagrams illustrating different types of joins between two datasets, labeled 'x' and 'y.' inner_join(x, y): Shows two overlapping circles with only the intersection shaded, representing records that are common to both 'x' and 'y.' left_join(x, y): Shows two overlapping circles with the left circle ('x') fully shaded and the intersection shaded, representing all records from 'x' and the matching records from 'y.' right_join(x, y): Shows two overlapping circles with the right circle ('y') fully shaded and the intersection shaded, representing all records from 'y' and the matching records from 'x.' full_join(x, y): Shows two overlapping circles with both circles fully shaded, representing all records from both 'x' and 'y,' including those without matches."></p>

</section>
<section id="more-mutating-joins-1" class="level2">
<h2 class="anchored" data-anchor-id="more-mutating-joins-1">More Mutating Joins</h2>
<p>Which directors would <strong>remain</strong> for each of the following?</p>
<div class="small">
<ul>
<li><code>left_join(directors_genres, movies_directors)</code></li>
<li><code>right_join(directors_genres, movies_directors)</code></li>
<li><code>full_join(directors_genres, movies_directors)</code></li>
</ul>
</div>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>movies_directors <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
</tr>
<tr class="even">
<td style="text-align: right;">9247</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
</section>
<section id="filtering-joins-semi_join" class="level2">
<h2 class="anchored" data-anchor-id="filtering-joins-semi_join">Filtering Joins: <code>semi_join()</code></h2>
<p>Keeps observations when their keys are present in <strong>both</strong> datasets, <strong>but only keeps variables from the first dataset</strong>.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img src="images/semi1.png" class="img-fluid" alt="An illustration of a semi join between two tables, each with two columns. The table labeled 'x,' has a key column with values 1, 2, and 3 and a value column with 'x1,' 'x2,' and 'x3.' The table labeled 'y,' has a key column with values 1, 2, and 4 and a value column with 'y1,' 'y2,' and 'y4.'"></p>
</div><div class="column" style="width:15%;">
<p><br></p>
<div class="r-fit-text">
<p>→  </p>
</div>
</div><div class="column" style="width:25%;">
<p><img src="images/semi2.png" class="img-fluid" alt="An arrow points from the first two tables (x and y) toward the right where a single table is displayed. This table is the result of a semi join, where only the values of x that had a match in y are kept. The resulting table includes rows with matching key values from both 'x' and 'y' (keys 1 and 2), displaying only the 'x' values ('x1' and 'x2'). Rows with non-matching keys (3 and 4) are excluded."></p>
</div>
</div>
</section>
<section id="filtering-joins-semi_join-1" class="level2">
<h2 class="anchored" data-anchor-id="filtering-joins-semi_join-1">Filtering Joins: <code>semi_join()</code></h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><code>semi_join()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Connection to <code>filter()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(director_id)`</code></pre>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>Movie Directors: 429, <del><strong>2931</strong></del>, 11652, 14927, 15092</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(director_id <span class="sc">%in%</span> movies_directors<span class="sc">$</span>director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
</div>
</section>
<section id="filtering-joins-anti_join" class="level2">
<h2 class="anchored" data-anchor-id="filtering-joins-anti_join">Filtering Joins: <code>anti_join()</code></h2>
<p><strong>Removes</strong> observations when their keys are present in <strong>both</strong> datasets, and <strong>only keeps variables from the first dataset</strong>.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img src="images/semi1.png" class="img-fluid" alt="Two tables on the left labeled 'x' and 'y,' each with two columns, show key-value pairs. The 'x' table contains a key column with values 1, 2, and 3 and a value column with 'x1,' 'x2,' and 'x3.' The 'y' table contains a key column with values 1, 2, and 4 and a value column with 'y1,' 'y2,' and 'y4.'"></p>
</div><div class="column" style="width:15%;">
<p><br></p>
<div class="r-fit-text">
<p>→  </p>
</div>
</div><div class="column" style="width:25%;">
<p><br></p>
<p><img src="images/anti2.png" class="img-fluid" data-fi-alt="An arrow points to the right, showing the result of an anti join. The resulting table includes the row from 'x' where the key (3) does not have a corresponding match in 'y.' It contains only the key-value pair (3, x3), demonstrating that the anti join keeps only the unmatched rows from the left table ('x')."></p>
</div>
</div>
</section>
<section id="filtering-joins-anti_join-1" class="level2">
<h2 class="anchored" data-anchor-id="filtering-joins-anti_join-1">Filtering Joins: <code>anti_join()</code></h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><code>anti_join()</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Connection to <code>filter()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(director_id)`</code></pre>
</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>Movie Directors: <del>429</del>, <strong>2931</strong>, <del>11652</del>, <del>14927</del>, <del>15092</del></p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>director_id <span class="sc">%in%</span> movies_directors<span class="sc">$</span>director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; ">
<table class="table caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
</div>
</section>
<section id="pa-4-military-spending" class="level2">
<h2 class="anchored" data-anchor-id="pa-4-military-spending"><a href="../../group-activities/week-4/PA-4-tidyr.html">PA 4: Military Spending</a></h2>
<p>Today you will be tidying messy data to explore the relationship between countries of the world and military spending.</p>
</section>
<section id="this-activity-will-require-knowledge-of" class="level2">
<h2 class="anchored" data-anchor-id="this-activity-will-require-knowledge-of">This activity will require knowledge of:</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="small">
<ul>
<li>function documentation</li>
<li>function arguments</li>
<li>locating missing values</li>
<li>character vectors</li>
<li>keys joining two datasets</li>
<li>searching / iterating over multiple columns</li>
<li>pivoting data from wide to long</li>
<li>creating side-by-side boxplots</li>
<li>locating the median on a boxplot</li>
<li>estimating the variability from a boxplot</li>
</ul>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><span class="midi"><strong>None of us have all these abilities. Each of us has some of these abilities.</strong></span></p>
</div>
</div>
</section>
<section id="dplyr-resources" class="level2">
<h2 class="anchored" data-anchor-id="dplyr-resources">dplyr Resources</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Everyone should have a <strong>dplyr</strong> cheatsheet!</p>
<p><strong>On the Back</strong>: The Combine Tables section gives advice on joining two datasets</p>
<ul>
<li>The “Filtering Join” section will be helpful when performing an <code>anti_join()</code>!</li>
</ul>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><img src="images/dplyr-cheatsheet-back.png" class="img-fluid" alt="A picture of the dplyr cheatsheet, which contains helpful information on working with data in a variety of ways."></p>
</div>
</div>
</section>
<section id="tidyr-resources" class="level2">
<h2 class="anchored" data-anchor-id="tidyr-resources">tidyr Resources</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Everyone should have a <strong>tidyr</strong> cheatsheet!</p>
<p><strong>On the Front</strong>: The Reshape Data section gives advice on pivoting a dataset from wide to long</p>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><img src="images/tidyr-cheatsheet.png" class="img-fluid" alt="A picture of the tidyr cheatsheet, which contains helpful information on transforming data in a variety of ways."></p>
</div>
</div>
<!-- ## Task Card -->
<!-- Every group should have a **task card**!  -->
<!-- . . . -->
<!-- ::: columns -->
<!-- ::: {.column width="40%"} -->
<!-- **On the Front** -->
<!-- - the expectations of each role -->
<!-- - the norms of collaborating -->
<!-- ::: -->
<!-- ::: {.column width="5%"} -->
<!-- ::: -->
<!-- ::: {.column width="55%"} -->
<!-- ::: {.fragment} -->
<!-- **On the Back** -->
<!-- - code and pictures for performing an `anti_join()` -->
<!-- - code and pictures for pivoting a dataset from wide to long -->
<!-- - guidelines for formatting `dplyr` and `tidyr` code -->
<!-- ::: -->
<!-- ::: -->
<!-- ::: -->
</section>
<section id="pair-programming-expectations" class="level2">
<h2 class="anchored" data-anchor-id="pair-programming-expectations">Pair Programming Expectations</h2>
<div class="columns">
<div class="column" style="width:49%;">
<p><strong>Developer</strong></p>
<div class="small">
<ul>
<li>Reads prompt and ensures Coder understands what is being asked.</li>
<li>Types the code specified by the Coder into the Quarto document.</li>
<li>Runs the code provided by the Coder.</li>
<li>Works with Coder to debug the code.</li>
<li>Evaluates the output.<br>
</li>
<li>Works with Coder to write code comments.</li>
</ul>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="fragment">
<p><strong>Coder</strong></p>
<div class="small">
<ul>
<li>Reads out instructions or prompts</li>
<li>Directs the Developer what to type.</li>
<li>Talks with Developer about their ideas.</li>
<li>Manages resources (e.g., cheatsheets, textbook, slides).</li>
<li>Works with Developer to debug the code.</li>
<li>Works with Developer to write code comments.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting Started</h2>
<div class="small">
<p>First, both of you will do the following:</p>
<!-- - Join your Practice Activity workspace in Posit Cloud -->
<!--   * You are in a new group, so you should have a new workspace! -->
<!-- - Log-in to Posit Cloud -->
<!-- - Open the PA 4: Military Spending project -->
<ul>
<li>Open the <code>PA4-dplyr.qmd</code> file</li>
</ul>
</div>
<p>. . .</p>
<div class="small">
<p>Then, the partner who woke up the earliest today starts as the Developer (typing and listening to instructions from the Coder)!</p>
<ul>
<li>The Coder <strong>does not type</strong>.
<ul>
<li>The collaborative editing feature should allow you to track what is being typed.</li>
</ul></li>
<li>The Developer <strong>only types what they are told to type</strong>.</li>
</ul>
</div>
</section>
<section id="external-resources" class="level2">
<h2 class="anchored" data-anchor-id="external-resources">External Resources</h2>
<p>During the Practice Activity, you <strong>are not</strong> permitted to use Google or ChatGPT for help.</p>
<p>. . .</p>
<p><br></p>
<p>You <strong>are</strong> permitted to use:</p>
<ul>
<li>the <code>dplyr</code> cheatsheet,</li>
<li>the <code>tidyr</code> cheatsheet,</li>
<li>the course textbook, and</li>
<li>the course slides.</li>
</ul>
</section>
<section id="submission" class="level2">
<h2 class="anchored" data-anchor-id="submission">Submission</h2>
<ul>
<li>Each person will input your responses to Canvas Questions 1, 2, and 3 into the PA4 Canvas quiz.</li>
<li>Each person will submit the <code>PA-4.html</code> file.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/github\.com\/hglanz\/statistical-computing-with-r");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, Hunter Glanz (original by Allison Theobold &amp; Judith Canner)</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hglanz/statistical-computing-with-r/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>