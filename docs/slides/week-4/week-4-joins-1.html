<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <title>Introduction to Statistical Computing in R – Data Joins + Pivots</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-b3bc3305d3b65543691033549249ddbf.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>

  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Joins + Pivots</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="tuesday-january-28" class="slide level2">
<h2>Tuesday, January 28</h2>
<p>Today we will discuss…</p>
<!-- -   Discord & Tokens -->
<!-- -   Grade Expectations  -->
<!--     + Survey on Canvas -->
<ul>
<li>New Material
<ul>
<li>Pivoting data with <code>tidyr</code></li>
<li>Joining data with <code>dplyr</code></li>
</ul></li>
<li><a href="../../group-activities/week-4/PA4-tidyr.qmd">PA 4: Military Spending</a></li>
</ul>
<!-- # Discord & Deadline Extension Tokens -->
<!-- # Discord & Deadline Extension Tokens -->
<!-- > If you answer / respond to another student's question on Discord, you will  -->
<!-- > earn one additional "token" (3-day deadline extension request).  -->
<!-- # Grade Expectations -->
<!-- # Grade Expectations -->
<!-- > The [course syllabus](../../course-materials/course-syllabus.qmd#sec-grades) -->
<!-- > has been updated to reflect the grade criteria you all proposed.  -->
<!-- # Grade Expectations -->
<!-- > The [course syllabus](../../course-materials/course-syllabus.qmd#sec-grades) -->
<!-- > has been updated to reflect the grade criteria you all proposed.  -->
<!-- You have until Sunday [to vote](https://canvas.calpoly.edu/courses/138158/quizzes/247752)  -->
<!-- on whether you agree with the proposed criteria, and to suggest ways these -->
<!-- criteria could be revised. -->
</section>
<section>
<section id="data-layouts" class="title-slide slide level1 center">
<h1>Data Layouts</h1>

</section>
<section id="tidy-data" class="slide level2">
<h2>Tidy Data</h2>
<p>Tidy data…</p>
<ul>
<li>is rectangular.</li>
<li>has observations as rows and variables as columns.</li>
<li><strong>has different formats for different tasks.</strong></li>
</ul>

<img data-src="https://r4ds.hadley.nz/images/tidy-1.png" alt="This image shows a visual representation of the three key concepts in tidy data: variables, observations, and values. It is divided into three sections. The first section on the left highlights vertical arrows pointing down each column of a table, labeled 'variables,' showing that each column represents a different variable (country, year, cases, population). The middle section has horizontal arrows pointing across rows of the same table, labeled 'observations,' indicating that each row is an observation or data point. The third section on the right has circles around individual data points within the table, labeled 'values,' indicating the actual values for each variable in the dataset." class="r-stretch"></section>
<section id="creating-tidy-data" class="slide level2">
<h2>Creating Tidy Data</h2>
<p>We may need to <strong>transform</strong> our data to turn it into the <strong>version of tidy</strong> that is best for a task at hand.</p>

<img data-src="https://www.openscapes.org/img/blog/tidydata/tidydata_4.jpg" alt="An illustration of two round, fluffy characters, one green and one purple, holding a large table between them labeled 'TIDY.' The table is held by clamps on either side labeled 'WRANGLE' in orange and pink. The green character on the left is smiling with one arm raised, while the purple character on the right is cheering with both arms up. The table represents tidy data, and the clamps labeled 'WRANGLE' suggest data manipulation or preparation." class="r-stretch quarto-figure-center"><p class="caption">Image by Allison Horst</p></section>
<section id="cereal-data" class="slide level2">
<h2>Cereal Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(liver)</span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(cereal)</span>
<span id="cb1-3"><a aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cereal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:450px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">type</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">calories</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">protein</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fat</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sodium</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fiber</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">carbo</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sugars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">potass</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vitamins</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">weight</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">cups</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">rating</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">100% Bran</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">130</td>
<td style="text-align: right;">10.0</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">68.40297</td>
</tr>
<tr class="even">
<td style="text-align: left;">100% Natural Bran</td>
<td style="text-align: left;">Q</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">33.98368</td>
</tr>
<tr class="odd">
<td style="text-align: left;">All-Bran</td>
<td style="text-align: left;">K</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">260</td>
<td style="text-align: right;">9.0</td>
<td style="text-align: right;">7.0</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">320</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">59.42551</td>
</tr>
<tr class="even">
<td style="text-align: left;">All-Bran with Extra Fiber</td>
<td style="text-align: left;">K</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">140</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">330</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">93.70491</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Almond Delight</td>
<td style="text-align: left;">R</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">34.38484</td>
</tr>
<tr class="even">
<td style="text-align: left;">Apple Cinnamon Cheerios</td>
<td style="text-align: left;">G</td>
<td style="text-align: left;">cold</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">29.50954</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="creating-tidy-data-1" class="slide level2">
<h2>Creating Tidy Data</h2>
<p>Let’s say we want to look at <code>mean</code> <strong>cereal nutrients</strong> based on <code>shelf</code>.</p>
<div class="fragment">
<p>Currently, the data are in a <strong>wide</strong> format – a separate column for each nutrient.</p>
<p><strong>Transforming</strong> the data will make plotting easier.</p>
</div>
</section>
<section id="tidying-the-cereals-data" class="slide level2">
<h2>Tidying the Cereals Data</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Wide</a></li><li><a href="#tabset-1-2">Wide Plot</a></li><li><a href="#tabset-1-3">Long</a></li><li><a href="#tabset-1-4">Long Plot</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="3-7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>cereal_wide <span class="ot">&lt;-</span> cereal <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a></a>  <span class="fu">group_by</span>(shelf) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a></a>  <span class="fu">summarise</span>(</span>
<span id="cb2-4"><a></a>    <span class="fu">across</span>(<span class="at">.cols =</span> calories<span class="sc">:</span>vitamins, </span>
<span id="cb2-5"><a></a>           <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x)</span>
<span id="cb2-6"><a></a>           )</span>
<span id="cb2-7"><a></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">calories</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">protein</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fat</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sodium</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">fiber</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">carbo</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sugars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">potass</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vitamins</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">102.5000</td>
<td style="text-align: right;">2.650000</td>
<td style="text-align: right;">0.60</td>
<td style="text-align: right;">176.2500</td>
<td style="text-align: right;">1.6850000</td>
<td style="text-align: right;">15.80000</td>
<td style="text-align: right;">4.800000</td>
<td style="text-align: right;">75.50000</td>
<td style="text-align: right;">20.00000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">109.5238</td>
<td style="text-align: right;">1.904762</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">145.7143</td>
<td style="text-align: right;">0.9047619</td>
<td style="text-align: right;">13.61905</td>
<td style="text-align: right;">9.619048</td>
<td style="text-align: right;">57.80952</td>
<td style="text-align: right;">23.80952</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">107.7778</td>
<td style="text-align: right;">2.861111</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">158.6111</td>
<td style="text-align: right;">3.1388889</td>
<td style="text-align: right;">14.50000</td>
<td style="text-align: right;">6.527778</td>
<td style="text-align: right;">129.83333</td>
<td style="text-align: right;">35.41667</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="tabset-1-2">
<div class="small">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="5-8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>my_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"calories_col"</span> <span class="ot">=</span> <span class="st">"steelblue"</span>, <span class="st">"sugars_col"</span> <span class="ot">=</span> <span class="st">"orange3"</span>)</span>
<span id="cb3-2"><a></a></span>
<span id="cb3-3"><a></a>cereal_wide <span class="sc">|&gt;</span> </span>
<span id="cb3-4"><a></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-5"><a></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> calories, <span class="at">color =</span> <span class="st">"calories_col"</span>)) <span class="sc">+</span></span>
<span id="cb3-6"><a></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> calories, <span class="at">color =</span> <span class="st">"calories_col"</span>)) <span class="sc">+</span> </span>
<span id="cb3-7"><a></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> sugars, <span class="at">color =</span> <span class="st">"sugars_col"</span>)) <span class="sc">+</span></span>
<span id="cb3-8"><a></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, <span class="at">y =</span> sugars, <span class="at">color =</span> <span class="st">"sugars_col"</span>)) <span class="sc">+</span></span>
<span id="cb3-9"><a></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_colors, <span class="at">labels =</span> <span class="fu">names</span>(my_colors)) <span class="sc">+</span></span>
<span id="cb3-10"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Shelf"</span>, <span class="at">y =</span> <span class="st">""</span>, <span class="at">subtitle =</span> <span class="st">"Mean Amount"</span>, <span class="at">color =</span> <span class="st">"Nutrient"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="week-4-joins-1_files/figure-revealjs/cereal-wide-plot-1.png" class="quarto-figure quarto-figure-center" alt="A line chart displaying the relationship between the mean amount of two nutrients ('calories_col' and 'sugars_col') and their corresponding shelf number (1, 2, 3). The y-axis represents the mean amount, ranging from 0 to 100, and the x-axis represents the shelf numbers (1, 2, 3). The blue line represents 'calories_col,' with a relatively flat trend around 90 across the shelves. The orange line represents 'sugars_col,' which remains close to zero across the same shelves. The legend on the right identifies the nutrient lines." width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-3">
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" data-code-line-numbers="5-6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>cereal_long <span class="ot">&lt;-</span> cereal <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> calories<span class="sc">:</span>vitamins,</span>
<span id="cb4-3"><a></a>               <span class="at">names_to =</span> <span class="st">"Nutrient"</span>,</span>
<span id="cb4-4"><a></a>               <span class="at">values_to =</span> <span class="st">"Amount"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a></a>  <span class="fu">group_by</span>(shelf, Nutrient) <span class="sc">|&gt;</span> </span>
<span id="cb4-6"><a></a>  <span class="fu">summarise</span>(<span class="at">mean_amount =</span> <span class="fu">mean</span>(Amount))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Nutrient</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">mean_amount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">calories</td>
<td style="text-align: right;">102.5000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">carbo</td>
<td style="text-align: right;">15.8000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">fat</td>
<td style="text-align: right;">0.6000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">fiber</td>
<td style="text-align: right;">1.6850000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">potass</td>
<td style="text-align: right;">75.5000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">protein</td>
<td style="text-align: right;">2.6500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">sodium</td>
<td style="text-align: right;">176.2500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">sugars</td>
<td style="text-align: right;">4.8000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">vitamins</td>
<td style="text-align: right;">20.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">calories</td>
<td style="text-align: right;">109.5238095</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">carbo</td>
<td style="text-align: right;">13.6190476</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">fat</td>
<td style="text-align: right;">1.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">fiber</td>
<td style="text-align: right;">0.9047619</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">potass</td>
<td style="text-align: right;">57.8095238</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">protein</td>
<td style="text-align: right;">1.9047619</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">sodium</td>
<td style="text-align: right;">145.7142857</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">sugars</td>
<td style="text-align: right;">9.6190476</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">vitamins</td>
<td style="text-align: right;">23.8095238</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">calories</td>
<td style="text-align: right;">107.7777778</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">carbo</td>
<td style="text-align: right;">14.5000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">fat</td>
<td style="text-align: right;">1.2500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">fiber</td>
<td style="text-align: right;">3.1388889</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">potass</td>
<td style="text-align: right;">129.8333333</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">protein</td>
<td style="text-align: right;">2.8611111</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">sodium</td>
<td style="text-align: right;">158.6111111</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">sugars</td>
<td style="text-align: right;">6.5277778</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">vitamins</td>
<td style="text-align: right;">35.4166667</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div id="tabset-1-4">
<div class="small">
<div class="cell" data-layout-align="center">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="2-7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>cereal_long <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> shelf, </span>
<span id="cb5-3"><a></a>                       <span class="at">y =</span> mean_amount, </span>
<span id="cb5-4"><a></a>                       <span class="at">color =</span> Nutrient)</span>
<span id="cb5-5"><a></a>         ) <span class="sc">+</span></span>
<span id="cb5-6"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-7"><a></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb5-8"><a></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Shelf"</span>, </span>
<span id="cb5-9"><a></a>       <span class="at">y =</span> <span class="st">""</span>, </span>
<span id="cb5-10"><a></a>       <span class="at">subtitle =</span> <span class="st">"Mean Amount"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="week-4-joins-1_files/figure-revealjs/cereal-long-plot-1.png" class="quarto-figure quarto-figure-center" width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="pivoting-data" class="title-slide slide level1 center">
<h1>Pivoting Data</h1>
<div class="columns">
<div class="column">
<p><img data-src="https://github.com/gadenbuie/tidyexplain/raw/main/images/static/png/original-dfs-tidy.png" alt="Two tables side by side, illustrating the difference between 'wide' and 'long' data formats. The left table labeled 'wide' has columns: 'id,' 'x,' 'y,' and 'z.' The 'id' column contains the values 1 and 2, and the 'x,' 'y,' and 'z' columns contain the values a, b, c, d, e, and f spread across the rows. The right table labeled 'long' has columns: 'id,' 'key,' and 'val.' The 'id' column has repeated values (1 and 2), the 'key' column contains 'x,' 'y,' and 'z,' and the 'val' column contains 'a' through 'f,' corresponding to the wide table but reorganized in a 'long' format."></p>
</div><div class="column">
<p><img data-src="https://github.com/gadenbuie/tidyexplain/raw/main/images/tidyr-pivoting.gif" alt="A gif showing the visual transformation of the data pictured, going from the wide format to the long format. Above the image is the R code that would produce each data layout."></p>
</div></div>
</section>
<section id="manual-method" class="slide level2">
<h2>Manual Method</h2>
<p>Consider daily rainfall observed in SLO in January 2023.</p>
<ul>
<li>The data is in a human-friendly form (like a calendar).</li>
<li>Each week has a row, and each day has a column.</li>
</ul>

<img data-src="images/slo-rainfall.jpg" alt="A spreadsheet displaying a table with days of the week as column headers (Sunday to Saturday) and weeks numbered 1 to 5 in the first column. The table contains numerical values corresponding to each day of the week for each week. Some cells contain 'NA,' indicating missing values, while other cells contain numerical values like 0.12, 0.27, 4.26, and so on. Several cells contain zeros, and a few cells are left empty." class="r-stretch quarto-figure-center"><p class="caption"><a href="cesanluisobispo.ucanr.edu">Data source</a></p><p>How would you <strong>manually</strong> convert this to <strong>long format</strong>?</p>
</section>
<section id="manual-method-steps" class="slide level2">
<h2>Manual Method: Steps</h2>
<div>
<div class="small">
<ol start="0" type="1">
<li class="fragment">Keep the column <code>Week</code>.</li>
<li class="fragment">Create a new column <code>Day_of_Week</code>.</li>
<li class="fragment">Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li class="fragment">Now we have three columns – move Sunday values over.</li>
</ol>
</div>
</div>
<div class="fragment">
<center>
<p><img data-src="images/pivot_rain1.png" style="width:25.0%" alt="A spreadsheet displaying a table with days of the week as column headers (Sunday to Saturday) and weeks numbered 1 to 5 in the first column. The table contains numerical values corresponding to each day of the week for each week. Some cells contain 'NA,' indicating missing values, while other cells contain numerical values like 0.12, 0.27, 4.26, and so on. Several cells contain zeros, and a few cells are left empty."></p>
</center>
</div>
</section>
<section id="manual-method-steps-1" class="slide level2">
<h2>Manual Method: Steps</h2>
<div class="small">
<ol start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Monday values over.</li>
</ol>
</div>
<center>
<img data-src="images/pivot_rain2.png" style="width:25.0%" alt="A table with three columns: 'Week,' 'Day_of_Week,' and 'Rainfall.' The 'Week' column contains numbers 1 to 5, while the 'Day_of_Week' column alternates between 'Sunday' and 'Monday.' The 'Rainfall' column lists numerical values for each week and day. For Sunday, the rainfall values are 0, 0.27, 0.34, 0, and 'NA' for weeks 1 through 5, respectively. For Monday, the rainfall values are 0.12, 4.26, 0.33, 0, and 'NA' for weeks 1 through 5, respectively.">
</center>
</section>
<section id="manual-method-steps-2" class="slide level2">
<h2>Manual Method: Steps</h2>
<div class="small">
<ol start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Monday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Tuesday values over.</li>
</ol>
</div>
</section>
<section id="manual-method-steps-3" class="slide level2">
<h2>Manual Method: Steps</h2>
<div class="small">
<ol start="0" type="1">
<li>Keep the column <code>Week</code>.</li>
<li>Create a new column <code>Day_of_Week</code>.</li>
<li>Create a new column <code>Rainfall</code> (hold daily rainfall values).</li>
<li>Now we have three columns – move Sunday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Monday values over.</li>
<li>Duplicate <code>Week</code> 1-5 and copy Tuesday values over.</li>
<li>Continue for the rest of the days of the week.</li>
</ol>
</div>
</section>
<section id="computational-approach" class="slide level2">
<h2>Computational Approach</h2>

<img data-src="images/slo-rainfall-sketch.png" alt="A table showing rainfall data for each day of the week across five weeks, with annotations explaining how to reshape the data from wide to long format. The table has columns for 'Week,' followed by the days of the week (Sunday to Saturday), and contains numerical values representing rainfall. There are three color-coded annotations: the 'Week' column is highlighted in green, labeled 'key' with the note 'keep this column, but repeat it many times.' The day names (Sunday through Saturday) are highlighted in red with the note 'turn into new column: Day_of_Week (repeat day of week many times).' The data cells are highlighted in blue with the note 'turn into new column: Rainfall (values for each week # and day of week).'" class="r-stretch"><p>We can use <code>pivot_longer()</code> to turn a <strong>wide</strong> dataset into a <strong>long(er)</strong> dataset.</p>
</section>
<section id="pivot_longer" class="slide level2">
<h2><code>pivot_longer()</code></h2>
<p>Take a <strong>wide</strong> dataset and turn it into a <strong>long</strong> dataset.</p>
<ul>
<li><code>cols</code> – specify the columns that should be pivoted.
<ul>
<li>Do <strong>not</strong> include the names of ID columns (columns to not be pivoted).</li>
</ul></li>
<li><code>names_to</code> – the name of the new column containing the old column names.</li>
<li><code>values_to</code> – the name of the new column containing the old column values.</li>
</ul>
</section>
<section id="pivot_longer-1" class="slide level2">
<h2><code>pivot_longer()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a aria-hidden="true" tabindex="-1"></a>slo_rainfall <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> Sunday<span class="sc">:</span>Saturday,</span>
<span id="cb6-3"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to  =</span> <span class="st">"Day_of_Week"</span>,</span>
<span id="cb6-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Daily_Rainfall"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Week</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Day_of_Week</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Daily_Rainfall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">0.12</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">1.58</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.91</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">0.05</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.27</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">4.26</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.43</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.16</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">1.41</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.34</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">0.33</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.13</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Sunday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Monday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Tuesday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="pivot_wider" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<p>Take a <strong>long</strong> dataset and turn it into a <strong>wide</strong> dataset.</p>
<ul>
<li><code>id_cols</code> – specify the column(s) that contain the ID for unique rows in the wide dataset.</li>
<li><code>names_from</code> – the name of the column containing the new column names.</li>
<li><code>values_from</code> – the name of the column containing the new column values.</li>
</ul>
</section>
<section id="pivot_wider-1" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<p>Let’s say we calculate the <code>mean</code> amount of <code>protein</code> for cereals on each <code>shelf</code> and for each <code>manuf</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a aria-hidden="true" tabindex="-1"></a>mean_protein <span class="ot">&lt;-</span> cereal <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(manuf, shelf) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_protein =</span> <span class="fu">mean</span>(protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">shelf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">mean_protein</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">G</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">G</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.285714</td>
</tr>
<tr class="even">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">K</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.750000</td>
</tr>
<tr class="even">
<td style="text-align: left;">K</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.142857</td>
</tr>
<tr class="odd">
<td style="text-align: left;">K</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.916667</td>
</tr>
<tr class="even">
<td style="text-align: left;">N</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">N</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">P</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">P</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">P</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.000000</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="pivot_wider-2" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<p>We can make this dataset more easily readable…</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a>mean_protein <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(shelf) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> manuf,</span>
<span id="cb8-4"><a aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> shelf,</span>
<span id="cb8-5"><a aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> mean_protein)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:420px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">1</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">2</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">1.285714</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="even">
<td style="text-align: left;">K</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">2.142857</td>
<td style="text-align: right;">2.916667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">P</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</section>
<section id="better-names-in-pivot_wider" class="slide level2">
<h2>Better names in <code>pivot_wider()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>mean_protein <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a></a>  <span class="fu">arrange</span>(shelf) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> manuf,</span>
<span id="cb9-4"><a></a>              <span class="at">names_from =</span> shelf,</span>
<span id="cb9-5"><a></a>              <span class="at">values_from =</span> mean_protein,</span>
<span id="cb9-6"><a></a>              <span class="at">names_prefix =</span> <span class="st">"Shelf_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:420px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">manuf</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Shelf_1</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Shelf_2</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">Shelf_3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">G</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">1.285714</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="even">
<td style="text-align: left;">K</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">2.142857</td>
<td style="text-align: right;">2.916667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">4.000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">P</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Q</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">2.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">R</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section></section>
<section>
<section id="data-joins" class="title-slide slide level1 center">
<h1>Data Joins</h1>

</section>
<section id="relational-data" class="slide level2">
<h2>Relational Data</h2>
<p>Multiple, interconnected tables of data are called <strong>relational</strong>.</p>
<ul>
<li>It is the <em>relation</em> between datasets, not just the individual datasets themselves, that are important.</li>
</ul>

<img data-src="images/imdb_relational.png" alt="A diagram depicting the relationships between various tables in a movie database. The tables and their columns are as follows. directors_genres: Contains 'director_id' (int), 'genre' (varchar), and 'prob' (float). Linked to the 'directors' table by 'director_id.' movies_directors: Contains 'director_id' (int) and 'movie_id' (int). Linked to both the 'directors' and 'movies' tables by 'director_id' and 'movie_id.' movies_genres: Contains 'movie_id' (int) and 'genre' (varchar). Linked to the 'movies' table by 'movie_id.' roles: Contains 'actor_id' (int), 'movie_id' (int), and 'role' (varchar). Linked to both the 'actors' and 'movies' tables by 'actor_id' and 'movie_id.' The following entity tables are represented at the bottom: directors: Contains 'id' (int), 'first_name' (varchar), and 'last_name' (varchar). movies: Contains 'id' (int), 'name' (varchar), 'year' (int), and 'rank' (float). actors: Contains 'id' (int), 'first_name' (varchar), 'last_name' (varchar), and 'gender' (char). Arrows represent relationships between the various tables, with foreign keys connecting them." class="r-stretch quarto-figure-center"><p class="caption">IMDb movie relational data</p></section>
<section id="data-joins-1" class="slide level2">
<h2>Data Joins</h2>
<p>We can <strong>combine</strong> (join) data tables based on their relations.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Mutating joins</strong></p>
<p>Add <em>variables</em> from a new dataframe to observations in an existing dataframe.</p>
<p><code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code>, <code>outer_join()</code></p>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<p><strong>Filtering Joins</strong></p>
<p>Filter <em>observations</em> based on values in new dataframe.</p>
<p><code>semi_join()</code>, <code>anti_join()</code></p>
</div></div>
</section>
<section id="keys" class="slide level2">
<h2>Keys</h2>
<p>A key uniquely identifies an observation in a data set.</p>
<ul>
<li>To combine (join) two datasets, the <strong>key</strong> needs to be present in both.</li>
</ul>
<div class="fragment">
<p><img data-src="images/imdb-keys.png" alt="A similar entity-relationship diagram (ERD) to the previous one, with the same tables and relationships between movie-related data. However, in this version, key columns in the tables are color-coded to highlight relationships. Orange highlights the 'director_id' in the 'directors_genres,' 'movies_directors,' and 'directors' tables, showing the connection between directors and their genres and movies. Blue highlights the 'movie_id' in the 'movies_directors,' 'movies_genres,' 'roles,' and 'movies' tables, showing the relationship between movies, genres, and roles. Green highlights the 'actor_id' in the 'roles' and 'actors' tables, showing the connection between actors and their roles in movies. Arrows continue to represent relationships between tables, following foreign key connections, now emphasized with the color coding."></p>
</div>
</section>
<section id="inner_join" class="slide level2">
<h2><code>inner_join()</code></h2>
<p>Keeps observations when their keys are present in <strong>both</strong> datasets.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="images/join_xy.png" alt="This image shows two tables on the left, labeled 'x' and 'y.' The 'x' table contains two columns: a key column with values 1, 2, and 3, and a value column with 'x1,' 'x2,' and 'x3.' The 'y' table also has two columns: a key column with values 1, 2, and 4, and a value column with 'y1,' 'y2,' and 'y3.'"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="images/inner_join.png" alt="This table combines data from both 'x' and 'y.' based on the 'key' column. It contains three columns: 'key,' 'val_x,' and 'val_y.' For key values 1 and 2, the corresponding values from both 'x' and 'y' are shown ('x1' with 'y1' and 'x2' with 'y2'), while the third rows from both original tables are excluded due to the mismatch in key values."></p>
</div></div>
</section>
<section id="inner_join-imdb-example" class="slide level2">
<h2><code>inner_join()</code>: IMDb Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:160px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a aria-hidden="true" tabindex="-1"></a>movies_directors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:160px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">movie_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: right;">300229</td>
</tr>
<tr class="even">
<td style="text-align: right;">9247</td>
<td style="text-align: right;">124110</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: right;">10920</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: right;">333856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: right;">192017</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: right;">109093</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: right;">237431</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div></div>
<p><font size="6"></font></p><font size="6">
<p>ID: 429, <strong>2931</strong>, 11652, 14927, 15092       ID: 429, <strong>9247</strong>, 11652, 14927, 15092</p>
</font><p><font size="6"></font></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(directors_genres, movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:160px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">movie_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
<td style="text-align: right;">300229</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
<td style="text-align: right;">300229</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">10920</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">333856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">10920</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">333856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">192017</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">192017</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">109093</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">237431</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">109093</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
<td style="text-align: right;">237431</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p><font size="6"></font></p><font size="6">
<p>ID: 429, <del><strong>2931</strong></del>, <del><strong>9247</strong></del>, 11652, 14927, 15092</p>
</font><p><font size="6"></font></p>
</div>
</section>
<section id="inner_join-imdb-example-1" class="slide level2">
<h2><code>inner_join()</code>: IMDb Example</h2>
<p>What if our <strong>key</strong> does not have the same name?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:170px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a aria-hidden="true" tabindex="-1"></a>directors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:170px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">first_name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">last_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Andrew</td>
<td style="text-align: left;">Adamson</td>
</tr>
<tr class="even">
<td style="text-align: right;">9247</td>
<td style="text-align: left;">Zach</td>
<td style="text-align: left;">Braff</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">James (I)</td>
<td style="text-align: left;">Cameron</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Ron</td>
<td style="text-align: left;">Clements</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Ethan</td>
<td style="text-align: left;">Coen</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div></div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb15" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">inner_join</span>(directors_genres, </span>
<span id="cb15-2"><a></a>           directors, </span>
<span id="cb15-3"><a></a>           <span class="at">by =</span> <span class="fu">join_by</span>(director_id <span class="sc">==</span> id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:170px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">first_name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">last_name</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Andrew</td>
<td style="text-align: left;">Adamson</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Andrew</td>
<td style="text-align: left;">Adamson</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">James (I)</td>
<td style="text-align: left;">Cameron</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">James (I)</td>
<td style="text-align: left;">Cameron</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Ron</td>
<td style="text-align: left;">Clements</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Ron</td>
<td style="text-align: left;">Clements</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Ethan</td>
<td style="text-align: left;">Coen</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Ethan</td>
<td style="text-align: left;">Coen</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</section>
<section id="piping-joins" class="slide level2">
<h2>Piping Joins</h2>
<p>Remember: the dataset you pipe in becomes the <strong>first argument</strong> of the function you are piping into!</p>
<ul>
<li>So if you are using a pipe, you will only be specifying the <strong>right</strong> dataset inside the <code>join</code> function.</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(directors_genres, movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>…is equivalent to…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="more-mutating-joins" class="slide level2">
<h2>More Mutating Joins</h2>
<div class="small">
<ul>
<li><p><code>left_join()</code> – keep only (and all) observations present in the left data set</p></li>
<li><p><code>right_join()</code> – keep only (and all) observations present in the right data set</p></li>
<li><p><code>full_join()</code> – keep only (and all) observations present in <strong>both</strong> data sets</p></li>
</ul>
</div>


<img data-src="images/joins.png" style="width:50.0%" alt="Four Venn diagrams illustrating different types of joins between two datasets, labeled 'x' and 'y.' inner_join(x, y): Shows two overlapping circles with only the intersection shaded, representing records that are common to both 'x' and 'y.' left_join(x, y): Shows two overlapping circles with the left circle ('x') fully shaded and the intersection shaded, representing all records from 'x' and the matching records from 'y.' right_join(x, y): Shows two overlapping circles with the right circle ('y') fully shaded and the intersection shaded, representing all records from 'y' and the matching records from 'x.' full_join(x, y): Shows two overlapping circles with both circles fully shaded, representing all records from both 'x' and 'y,' including those without matches." class="r-stretch"></section>
<section id="more-mutating-joins-1" class="slide level2">
<h2>More Mutating Joins</h2>
<p>Which directors would <strong>remain</strong> for each of the following?</p>
<div class="small">
<ul>
<li><code>left_join(directors_genres, movies_directors)</code></li>
<li><code>right_join(directors_genres, movies_directors)</code></li>
<li><code>full_join(directors_genres, movies_directors)</code></li>
</ul>
</div>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a aria-hidden="true" tabindex="-1"></a>movies_directors <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
</tr>
<tr class="even">
<td style="text-align: right;">9247</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div></div>
</section>
<section id="filtering-joins-semi_join" class="slide level2">
<h2>Filtering Joins: <code>semi_join()</code></h2>
<p>Keeps observations when their keys are present in <strong>both</strong> datasets, <strong>but only keeps variables from the first dataset</strong>.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="images/semi1.png" alt="An illustration of a semi join between two tables, each with two columns. The table labeled 'x,' has a key column with values 1, 2, and 3 and a value column with 'x1,' 'x2,' and 'x3.' The table labeled 'y,' has a key column with values 1, 2, and 4 and a value column with 'y1,' 'y2,' and 'y4.'"></p>
</div><div class="column" style="width:15%;">
<p><br></p>
<div class="r-fit-text">
<p>→  </p>
</div>
</div><div class="column" style="width:25%;">
<p><img data-src="images/semi2.png" alt="An arrow points from the first two tables (x and y) toward the right where a single table is displayed. This table is the result of a semi join, where only the values of x that had a match in y are kept. The resulting table includes rows with matching key values from both 'x' and 'y' (keys 1 and 2), displaying only the 'x' values ('x1' and 'x2'). Rows with non-matching keys (3 and 4) are excluded."></p>
</div></div>
</section>
<section id="filtering-joins-semi_join-1" class="slide level2">
<h2>Filtering Joins: <code>semi_join()</code></h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><code>semi_join()</code></a></li><li><a href="#tabset-2-2">Connection to <code>filter()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>Movie Directors: 429, <del><strong>2931</strong></del>, 11652, 14927, 15092</p>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(director_id <span class="sc">%in%</span> movies_directors<span class="sc">$</span>director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:320px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Adventure</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="even">
<td style="text-align: right;">429</td>
<td style="text-align: left;">Fantasy</td>
<td style="text-align: right;">0.750000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Sci-Fi</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="even">
<td style="text-align: right;">11652</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.500000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Animation</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">14927</td>
<td style="text-align: left;">Family</td>
<td style="text-align: right;">1.000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Comedy</td>
<td style="text-align: right;">0.545455</td>
</tr>
<tr class="even">
<td style="text-align: right;">15092</td>
<td style="text-align: left;">Crime</td>
<td style="text-align: right;">0.545455</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
</div>
</section>
<section id="filtering-joins-anti_join" class="slide level2">
<h2>Filtering Joins: <code>anti_join()</code></h2>
<p><strong>Removes</strong> observations when their keys are present in <strong>both</strong> datasets, and <strong>only keeps variables from the first dataset</strong>.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="images/semi1.png" alt="Two tables on the left labeled 'x' and 'y,' each with two columns, show key-value pairs. The 'x' table contains a key column with values 1, 2, and 3 and a value column with 'x1,' 'x2,' and 'x3.' The 'y' table contains a key column with values 1, 2, and 4 and a value column with 'y1,' 'y2,' and 'y4.'"></p>
</div><div class="column" style="width:15%;">
<p><br></p>
<div class="r-fit-text">
<p>→  </p>
</div>
</div><div class="column" style="width:25%;">
<p><br></p>
<p><img data-src="images/anti2.png" data-fi-alt="An arrow points to the right, showing the result of an anti join. The resulting table includes the row from 'x' where the key (3) does not have a corresponding match in 'y.' It contains only the key-value pair (3, x3), demonstrating that the anti join keeps only the unmatched rows from the left table ('x')."></p>
</div></div>
</section>
<section id="filtering-joins-anti_join-1" class="slide level2">
<h2>Filtering Joins: <code>anti_join()</code></h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><code>anti_join()</code></a></li><li><a href="#tabset-3-2">Connection to <code>filter()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(movies_directors)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>Movie Directors: <del>429</del>, <strong>2931</strong>, <del>11652</del>, <del>14927</del>, <del>15092</del></p>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a aria-hidden="true" tabindex="-1"></a>directors_genres <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>director_id <span class="sc">%in%</span> movies_directors<span class="sc">$</span>director_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; ">
<table class="table caption-top" data-quarto-postprocess="true" style="font-size: 30px; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">director_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">genre</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">prob</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Drama</td>
<td style="text-align: right;">0.714286</td>
</tr>
<tr class="even">
<td style="text-align: right;">2931</td>
<td style="text-align: left;">Action</td>
<td style="text-align: right;">0.428571</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
</div>
</section>
<section id="pa-4-military-spending" class="slide level2">
<h2><a href="../../group-activities/week-4/PA-4-tidyr.html">PA 4: Military Spending</a></h2>
<p>Today you will be tidying messy data to explore the relationship between countries of the world and military spending.</p>
</section>
<section id="this-activity-will-require-knowledge-of" class="slide level2">
<h2>This activity will require knowledge of:</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="small">
<ul>
<li>function documentation</li>
<li>function arguments</li>
<li>locating missing values</li>
<li>character vectors</li>
<li>keys joining two datasets</li>
<li>searching / iterating over multiple columns</li>
<li>pivoting data from wide to long</li>
<li>creating side-by-side boxplots</li>
<li>locating the median on a boxplot</li>
<li>estimating the variability from a boxplot</li>
</ul>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><span class="midi"><strong>None of us have all these abilities. Each of us has some of these abilities.</strong></span></p>
</div></div>
</section>
<section id="dplyr-resources" class="slide level2">
<h2>dplyr Resources</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Everyone should have a <strong>dplyr</strong> cheatsheet!</p>
<p><strong>On the Back</strong>: The Combine Tables section gives advice on joining two datasets</p>
<ul>
<li>The “Filtering Join” section will be helpful when performing an <code>anti_join()</code>!</li>
</ul>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><img data-src="images/dplyr-cheatsheet-back.png" alt="A picture of the dplyr cheatsheet, which contains helpful information on working with data in a variety of ways."></p>
</div></div>
</section>
<section id="tidyr-resources" class="slide level2">
<h2>tidyr Resources</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Everyone should have a <strong>tidyr</strong> cheatsheet!</p>
<p><strong>On the Front</strong>: The Reshape Data section gives advice on pivoting a dataset from wide to long</p>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><img data-src="images/tidyr-cheatsheet.png" alt="A picture of the tidyr cheatsheet, which contains helpful information on transforming data in a variety of ways."></p>
</div></div>
<!-- ## Task Card -->
<!-- Every group should have a **task card**!  -->
<!-- . . . -->
<!-- ::: columns -->
<!-- ::: {.column width="40%"} -->
<!-- **On the Front** -->
<!-- - the expectations of each role -->
<!-- - the norms of collaborating -->
<!-- ::: -->
<!-- ::: {.column width="5%"} -->
<!-- ::: -->
<!-- ::: {.column width="55%"} -->
<!-- ::: {.fragment} -->
<!-- **On the Back** -->
<!-- - code and pictures for performing an `anti_join()` -->
<!-- - code and pictures for pivoting a dataset from wide to long -->
<!-- - guidelines for formatting `dplyr` and `tidyr` code -->
<!-- ::: -->
<!-- ::: -->
<!-- ::: -->
</section>
<section id="pair-programming-expectations" class="slide level2">
<h2>Pair Programming Expectations</h2>
<div class="columns">
<div class="column" style="width:49%;">
<p><strong>Developer</strong></p>
<div class="small">
<ul>
<li>Reads prompt and ensures Coder understands what is being asked.</li>
<li>Types the code specified by the Coder into the Quarto document.</li>
<li>Runs the code provided by the Coder.</li>
<li>Works with Coder to debug the code.</li>
<li>Evaluates the output.<br>
</li>
<li>Works with Coder to write code comments.</li>
</ul>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="fragment">
<p><strong>Coder</strong></p>
<div class="small">
<ul>
<li>Reads out instructions or prompts</li>
<li>Directs the Developer what to type.</li>
<li>Talks with Developer about their ideas.</li>
<li>Manages resources (e.g., cheatsheets, textbook, slides).</li>
<li>Works with Developer to debug the code.</li>
<li>Works with Developer to write code comments.</li>
</ul>
</div>
</div>
</div></div>
</section>
<section id="getting-started" class="slide level2">
<h2>Getting Started</h2>
<div class="small">
<p>First, both of you will do the following:</p>
<!-- - Join your Practice Activity workspace in Posit Cloud -->
<!--   * You are in a new group, so you should have a new workspace! -->
<!-- - Log-in to Posit Cloud -->
<!-- - Open the PA 4: Military Spending project -->
<ul>
<li>Open the <code>PA4-dplyr.qmd</code> file</li>
</ul>
</div>
<div class="fragment">
<div class="small">
<p>Then, the partner who woke up the earliest today starts as the Developer (typing and listening to instructions from the Coder)!</p>
<ul>
<li>The Coder <strong>does not type</strong>.
<ul>
<li>The collaborative editing feature should allow you to track what is being typed.</li>
</ul></li>
<li>The Developer <strong>only types what they are told to type</strong>.</li>
</ul>
</div>
</div>
</section>
<section id="external-resources" class="slide level2">
<h2>External Resources</h2>
<p>During the Practice Activity, you <strong>are not</strong> permitted to use Google or ChatGPT for help.</p>
<div class="fragment">
<p><br></p>
<p>You <strong>are</strong> permitted to use:</p>
<ul>
<li>the <code>dplyr</code> cheatsheet,</li>
<li>the <code>tidyr</code> cheatsheet,</li>
<li>the course textbook, and</li>
<li>the course slides.</li>
</ul>
</div>
</section>
<section id="submission" class="slide level2">
<h2>Submission</h2>
<ul>
<li>Each person will input your responses to Canvas Questions 1, 2, and 3 into the PA4 Canvas quiz.</li>
<li>Each person will submit the <code>PA-4.html</code> file.</li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/github\.com\/hglanz\/statistical-computing-with-r");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>